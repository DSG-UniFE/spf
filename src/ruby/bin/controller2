#!/usr/bin/env ruby

SRC_RUBY_DIR = File.expand_path(File.join(File.dirname(__FILE__), '..'))
$LOAD_PATH.unshift(SRC_RUBY_DIR) unless $LOAD_PATH.include?(SRC_RUBY_DIR)

if RUBY_PLATFORM =~ /java/
  JARS_DIR = File.expand_path(File.join(File.dirname(__FILE__), '..', '..', '..', 'jars'))
  Dir["#{JARS_DIR}/*.jar"].each do |jar|
    $CLASSPATH << jar unless $CLASSPATH.include?(jar)
  end
end

require 'java'
require 'spf/controller/pig_ds'

java_import 'util.KdTree'


puts "\n"
puts "+++++++++++++++++++++++++++++++++"
puts "+++++                       +++++"
puts "+++++                       +++++"
puts "+++++    SPF Controller     +++++"
puts "+++++                       +++++"
puts "+++++                       +++++"
puts "+++++++++++++++++++++++++++++++++"
puts "\n"

pigs_tree = KdTree.new
pig = SPF::Controller::PigDS.new(:pig1, 10, 100, nil, 45, 39)
pigs_tree.add(pig)
pig = SPF::Controller::PigDS.new(:pig1, 10, 100, nil, 50, 49)
pigs_tree.add(pig)
req=SPF::Controller::PigDS.new(:req, 0, 0, nil, 54, 45)
pigs = pigs_tree.nearestNeighbourSearch(1, req)
puts pigs[0]
#puts pigs_tree
pigs_tree.remove(pigs[0])
#puts pigs_tree

